---
layout: post
title: 一次“黑天鹅”事件对数据分析科学性的启示 
---

## 导读

1. 什么是黑天鹅
2. 数据分析领域黑天鹅事件案例
3. 科学的数据分析视角
4. 对我们的启示


### 什么是黑天鹅？

![_ds1]({{ site.baseurl }}/images/0001 BlackSwan/black-swan.png)

17世纪之前的欧洲人认为所有的天鹅都是白色的，因为他们从来没有见过黑色的天鹅，直到第一批欧洲人踏上澳大利亚的土地见到第一只黑天鹅，整个对于天鹅的认知都被颠覆。这就是最近很火的“黑天鹅”一词的来历。


《黑天鹅》一书的作者，“黑天鹅”之父，华尔街著名交易员，Nassim NicholasTaleb 对于黑天鹅事件给出了比较明确的定义：

1. 首先是“意外性”，换句话说是事件是稀有的；
2. 其次是“极端性”，换句话说是事件的发生具备很大的冲击力；
3. 最后是“回溯性”，换句话说是经历的人会不自觉的给事件的发生找理由解脱；

换句话说就是，“黑天鹅”事件是在现有知识体系之外的现象。因此，黑天鹅事件的出现往往会极大地改变社会对一个事物，一种现象的认知，拓展全社会的知识体系包线。其实研究机构里面的教授，博士，研究员们每天都在主动寻找潜在的“黑天鹅”，当然主动找到的就没有“意外性”，自然就不是黑天鹅。


黑天鹅事件的发生原因有很多，不少就是跟不科学的数据分析直接相关。下面我们来看看其中最著名的一个：挑战者航天飞机失事事件。

### 数据分析领域黑天鹅事件案例

以下案例描述参考了纽约大学Stern商学院统计学教授Jeffrey S. Simonoff 的研究报告。这里需要强调的一点是，挑战者航天飞机失事本质是决策的失误，决策的失误原因有很多方面，而其中一个很重要的原因是决策依据的错误。这里着重考察的是数据的不科学性在其中扮演的角色，不涉及其他方面的问题。

挑战者航天飞机失事本是可以避免的，但是由于管理层和工程师没有采用科学的方法进行数据分析，而有正确直觉和经验的工程师又没有将直觉用数据体现出来从而说服管理层，最终酿成惨剧。

一点背景知识。航天飞机借助于两个助推火箭升空。每个助推火箭由多节组成，每节之间用直径37.5英尺，厚度为0.28英寸的橡胶O型圈密封。每个助推火箭需要三个O型圈，整个航天飞机飞行需要用到6个O型圈。这些O型圈的作用是防止引擎燃烧产生的炙热气体外泄。在低温条件下O型圈会由于橡胶失去弹性而失效，不能密封住接缝，使得燃料外泄，如果在飞行过程中泄漏会与尾焰混合发生爆炸。因此O型圈在不同温度下的表现对安全至关重要。


在挑战者航天飞机的这次飞行前，航天飞机一共有24次发射，其中23次发射后，这些O型圈都进行了破损检验，没有检验的一次是由于这些设备遗落在海里没能大捞上来。由于空气温度与O型圈的效力存在物理上的影响关系，而O型圈对于发射安全意义重大，因此工程师和管理层对于温度与O型圈的实证数量关系非常关心，而这个分析结果对于挑战者航天飞机发射来说更是关键，因为发射当天凌晨的气温根据天气预报会降到华氏31度（摄氏-0.5度），这个温度是以前发射从未经历过的，也是允许发射的最低温度。大家注意，这里就是可能突破现有知识体系包线的地方。

根据历史数据，在23次有破损检验记录的发射中，有7次发射中至少有一个O型环发生失效，因此如何分析这些数据会直接影响挑战者航天飞机的发射。大家先要记住，每次飞行会用到6个O型圈。

NASA管理层和助推火箭制造服务商莫顿-塞奥科公司的工程师参考的一个分析结果是这样的：

![_ds2]({{ site.baseurl }}/images/0001 BlackSwan/badrate.png)

![_ds3]({{ site.baseurl }}/images/0001 BlackSwan/badrate_figure.png)

可以看到，根据发生过损坏事件的7发射数据中并不能得出O型环的损坏和温度有明确的关系。

而莫顿-塞奥科公司的一些工程师，比如著名的罗杰·博伊斯乔利，则根据物理学的经验认为发射前一天的40华氏度低温以及发射当天早晨的极低温会必然造成O型圈实效，但是他们没有拿出有说服力的数据。

因为此次发射已经由于各种原因被推迟了5次，NASA和发射中心管理层承受了巨大的压力，最后他们以及助推器承包商莫顿-塞奥科的管理层采纳了第一份数据分析报告的结果，决定即使低温仍然按照原计划来发射挑战者航天飞机，从而酿成惨剧。

![_ds4]({{ site.baseurl }}/images/0001 BlackSwan/challenger.png)

### 科学的数据分析视角

作为一个数据科学家，在面临这个数据稀疏的问题的时候应该怎么进行科学的分析呢？


显然，那16次没有破损现象的发射虽然其O型圈破损率为0，但是没有事件发生不表示信息为0，反而包含了大量信息。如果将这些发射的数据点纳入分析，上图会变成这样：

![_ds5]({{ site.baseurl }}/images/0001 BlackSwan/damage vs temp.png)
除开右上角的那个“异常点”，温度与实效概率之间的关系就非常明确了：温度越低，O型圈实效的概率就越高，并且似乎有加速增加的趋势。

 

对数据进行更细致的分析发现，该图右上角的数据点是挑战者航天飞机1985年10月30日至11月6日执行的一次任务。这次任务中O型圈的失效与其他所有6次失效（注意，温度为70华氏度的点对应2次失效）的情况不同。这个数据点对应的失效属于“漏气（blow-by）”，即是热焰从O型圈泄漏，但是没有毁坏O型圈，而其他6次的失效都属于“灼蚀（erosion）”，即是热焰烧毁O型圈。

 

因为数据量不大，作为一个数据科学家，显然这个时候最习惯的方法是对外部气温与是否有“灼蚀”性失效这样的关系进行建模。对于这种数据量极小的二分类数据，统计学家们自然会选择罗辑思特回归（Logistic Regression）来进行建模。技术的细节这里不再螯述，我们来看看结果：

温度变量的比值比：0.891

经验对数比值公式：log(失效比值) = 5.08 -0.1156*Temperature

经验公式里温度的系数（-0.1156）有非常明确的解读：外部温度每上升一华氏度就伴随着O型圈灼蚀性失效的比值为exp(-0.1156)=0.891，即大约11%的降低，正好对应于上面的“温度变量的比值”结果。这里，“比值”是是指事件发生的可能性与不发生的可能性之比，罗辑思特回归的基本假设就是概率与输入因子之间的关系不是线性的，但是比值的对数与输入因子之间的关系是线性的，这样的假设有利于建模，对于大多数情况也是一个合理的先验假设。

 

当然，对于大多数人来说，还是概率理解起来更直接，那么我们可以根据上述经验对数比值关系将发生当天的31华氏度外部温度换算到O型圈灼蚀性失效的概率上：96%！也就是说，根据统计模型的估算，发生当天发生灼蚀性失效的概率高达96%，几乎是必然发生的事件。我们甚至可以将各个温度下失效的概率画出来：

![_ds6]({{ site.baseurl }}/images/0001 BlackSwan/damage vs temp fitted.png)


这里大家可能会有疑问。在前面的几次低温发射中，也都出现了灼蚀性失效，但是并没有机毁人亡，这如何理解呢？我们虽然没有灼蚀程度的信息，但是根据业务，可以将失效概率与灼蚀烧毁的程度进行联系，可以认为灼蚀概率越高，就越接近彻底烧毁，那么发生机毁人亡的概率就越高。

### 对我们的启示

围绕挑战者航天飞机失事所进行的数据分析及复盘对数据科学家和相当数据科学家的人来说有极大的启示意义（again，这里不涉及其他工程伦理和决策的思考）：

1. 数据分析的科学性是保证结论的正确性的根本。很多时候，人们喜欢做bad case分析，这本身没错，但是只限于bad case分析的发现来进行决策就是大问题了，因为这种分析抛弃了good case里面包含的大量信息，本身就是缺失数据下的分析，科学性无法保证；
2. 数据分析的科学性表现之一是对数据本质的认知。在挑战者这个案例里面，正确认识到1985年11月初那次失效是一个轻微失效，并且与低温状态下的失效都完全不同，是能决定剔除改数据点进行建模的基础。这不能通过其他统计分析（比如Cook’s D等统计量）的结论来得到；
3. 数据分析的科学性表现之二是对模型的科学认知。这里采用罗辑思特回归是认识到其在稀疏数据下的鲁棒性强，并且其假设的函数关系是符合基本的物理关系的描述。
4. 正确的数据分析可以有效拓展现有知识体系的包线。在这次挑战者失事之前，对于O型圈是否失效与温度的关系停止在华氏50度的边界上，在更低温度下是没有认知的，只有个别工程师的“感觉”认知。通过正确的建模，可以对以前未经历的环境下的情况进行了解和推断，从而拓展知识体系的包线。
5. 数学分析是一个细致工作，不能偷懒。如果为了快速产出报告而进行quick and dirty的工作，那么黑天鹅就一定在前进的未知道路上等着你。

![_ds6]({{ site.baseurl }}/images/QRcode.PNG)
